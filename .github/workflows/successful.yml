name: Final Copy

on:
  push:
    branches:
      - temp

jobs:
  copy_branch:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout source repository
        uses: actions/checkout@v3

      - name: Copy branch
      
        run: |
          cd /home/runner/work
          git clone https://Seconddemo:${{ secrets.PAT }}@github.com/Seconddemo/Test1.git
          cd Test1
          ls -la /home/runner/work/sample-app/sample-app
          rsync -av /home/runner/work/sample-app/sample-app /home/runner/work/Test/
          cd /home/runner/work/Test
          git remote remove origin
          git remote add origin https://github.com/Seconddemo/Test1.git
          git config --global user.name "Seconddemo"
          git config --global user.email "somad56045@gienig.com"
          git add .
          git commit -m "first" || true
          git switch -c demo
          # git remote -v
          git push https://Seconddemo:${{ secrets.PAT }}@github.com/Seconddemo/Test1.git demo
          
